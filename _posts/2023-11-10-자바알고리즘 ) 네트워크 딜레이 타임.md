---
layout: single
title:  "프로그래머스) 743. 네트워크 딜레이 타임 (자바)"
categories: Leetcode
tags : 자바알고리즘 그래프
---

https://leetcode.com/problems/network-delay-time/

문제 : k에서 출발해 모든 노드가 신호를 받을 수 있는 시간을 계산하라.
한 군데라도 노드에 도달할 수 없는 경우 -1 반환
입력값 (u, v, w)는 각각 출발지, 도착지, 소요시간으로 구성되며, 전체 노드의 개수는 n개

입력: 시간 = [[2,1,1],[2,3,1],[3,4,1]], n = 4, k = 2  
출력: 2  
예 2:  

입력: times = [[1,2,1]], n = 2, k = 1  
 출력: 1  
예시 3:  

입력: times = [[1,2,1]], n = 2, k = 2  
 출력: -1  

- 다익스트라 알고리즘 : 항상 노드 주변의 최단 경로만을 택하는 대표적인 그리디 알고리즘 중 하나  
다익스트라 알고리즘 구현시 우선순위 큐를 적용하면 시간복잡도가 O((V + E) log V)가 된다.  
최단 경로 찾기시 자주 쓰임  

판별할 사항 
1. 모든 노드가 신호 받는데 걸리는 시간 => 시간 순으로 저장하기 위해 우선순위 큐 사용  
2. 모든 노드에 도달할 수 있는지 여부 (없으면 -1) => 결과 변수가 노드의 수와 같은지 확인  


```
import java.util.*;

class Solution {
    public int networkDelayTime(int[][] times, int n, int k) {
        // 담기
        Map<Integer, Map<Integer, Integer>> map = new HashMap<>();
        for(int[] time : times) {
            map.putIfAbsent(time[0], new HashMap<>());
            map.get(time[0]).put(time[1], time[2]);
        }

        // 큐 준비
        Queue<Map.Entry<Integer, Integer>> q = new PriorityQueue<>(Map.Entry.comparingByValue());
        q.add(new AbstractMap.SimpleEntry<>(k, 0));

        // 결과 배열 준비
        Map<Integer, Integer> result = new HashMap<>();
        while(!q.isEmpty()) {
            Map.Entry<Integer, Integer> temp = q.poll();
            Integer dest = temp.getKey();
            Integer cost = temp.getValue();

            if(!result.containsKey(dest)) {
                result.put(dest, cost);
                if(map.containsKey(dest)) {
                    for(Map.Entry<Integer, Integer> t : map.get(dest).entrySet()) {
                    int alt = cost + t.getValue();
                    q.add(new AbstractMap.SimpleEntry<>(t.getKey(), alt));
                    }
                }
            }
        }

        // 검사
        if(result.size() == n) {
            // 가장 오래걸리는 지점의 소요시간 추출
            return Collections.max(result.values());
        }
        // 일부 노드에는 도달할 수 없음
        return -1;
    }
}
```

참고 도서 : 자바 알고리즘 인터뷰 with 코틀린 469p